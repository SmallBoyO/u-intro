<!--miniprogram/pages/intro/intro.wxml-->
<custom style="height:{{CustomBar}}px;">
  <bar class="fixed gradual-blue" style="height:{{CustomBar}}px;padding-top:{{StatusBar}}px;">
    <navigator class='action' open-type="navigateBack" delta="1" hover-class="none">
      <text class="iconfont icon-xiangzuo"></text>
      <text>返回</text> 
    </navigator>
  </bar>
</custom>

<view class="unit-container">
  <view class="unit-title">
    <view class="left-box">
      <text class="title">简历等级</text>
      <text class="explain">再获得{{0}}个升级包，可达到{{'精英'}}等级</text>
    </view>
    <view class="right-box">等级包{{likeNum}}</view>
  </view>
  <view class="grade-bar">
    <view class="bar-box">
      <view class="bar-bg" style="width:{{likeNum>100?100:likeNum}}%"></view>
    </view>
    <view class="grade-name-box">
      <text class="name" style="left:0%">普通</text>
      <text class="name" style="left:10%">精英</text>
      <text class="name" style="left:48%">天才</text>
      <text class="name" style="right:0%">名宿</text>
    </view>
  </view>
  <view class="buy-box">
    <view class="box-left">
      <text>等级包</text>
      <view class="number-box">
        <text bindtap="minusBuyNum" class="iconfont icon-minus"></text>
        <input class="num-input" value="{{buyLikeNum}}" type='number' ></input>
        <text bindtap="addBuyNum" class="iconfont icon-add"></text>
      </view>
      <text class="price">￥{{buyLikeNum}}</text>
    </view>
    <button class="buy-btn" bindtap='showPayDialogFun'>购买加速包</button>
  </view>
</view>

<view class="intro-container">
  <text>姓名：{{introInfo.name}}</text>
  <text>电话：{{phone}}</text>
  <text>出生日期：{{introInfo.birthday}}</text>
  <text>居住地址：{{introInfo.address}}</text>
</view>

<view class="fixed-btn-outer">
  <view class="fixed-btn-box">
    <button class="btn bg-blue" bindtap='editIntro'>修改简历</button>
    <button class="btn" type="warn" open-type="share" data-id="{{introId}}">好友帮升级</button>
  </view>
</view>



<modal-box class="{{showShareDialog?'show':''}}">
  <dialog>
    <text bindtap='closeShareDialog' class="close iconfont icon-close"></text>
    <view class='share-dialog'>
      <view class="share-explain">
        <view class="title"><text>您现在还是{{grade[gradeIndex].name}}等级！</text></view>
        <view class="explain"><text>升到精英等级</text></view>
        <view class="explain"><text>可以获得{{grade[gradeIndex+1].auth}}</text></view>
        <view class="hint">你现在已有<text class="big-txt">{{likeNum}}</text>升级包</view>
      </view>
      <button class="share-btn" open-type="share" data-id="{{introId}}">分享好友升级</button>
      <!-- <button class="pay-btn" data-id="{{introId}}">购买升级包</button> -->
    </view>
  </dialog>
</modal-box>


<modal-box class="bottom-modal {{showPayDialog?'show':''}}">
  <dialog>
    <view class="pay-container">
      <view class="head-title">
        <text bindtap='closePayDialog' class="iconfont icon-close1" ></text>
        <text>订单支付</text>
      </view>
      <view class="row">
        <text class="name">付款方式</text>
        <text class="gray">微信支付</text>
      </view>
      
      <view class="row marB">
        <text class="name">需付款</text>
        <text class="big-txt">￥{{buyLikeNum}}</text>
      </view>

      <button class="pay-btn">立即支付</button>
    </view>
  </dialog>
</modal-box>
